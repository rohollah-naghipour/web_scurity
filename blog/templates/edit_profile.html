{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile - My Blog</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/black.png' %}">
    <link rel="stylesheet" href="{% static 'css/edit_profile.css' %}">
</head>
<body class="edit-profile-page">
    <div class="profile-container">
        <!-- Header -->
        <div class="profile-header">
            <div class="back-button">
                <a href="{% url 'user_profile' %}" class="back-link">
                    <span class="back-arrow">‚Üê</span>
                    Back to Profile
                </a>
            </div>
            <h1 class="profile-title">Edit Your Profile</h1>
            <p class="profile-subtitle">Update your personal information and password</p>
        </div>

        <!-- Profile Form -->
        <div class="profile-form-container">
            {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                <div class="message message-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <form method="post" class="profile-form">
                {% csrf_token %}
                
                <div class="form-section">
                    <h3 class="section-title">Personal Information</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.first_name.id_for_label }}">First Name</label>
                            {{ form.first_name }}
                            {% if form.first_name.errors %}
                            <div class="error-message">{{ form.first_name.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.last_name.id_for_label }}">Last Name</label>
                            {{ form.last_name }}
                            {% if form.last_name.errors %}
                            <div class="error-message">{{ form.last_name.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title">Account Information</h3>
                    
                    <div class="form-group">
                        <label for="{{ form.username.id_for_label }}">Username</label>
                        {{ form.username }}
                        {% if form.username.errors %}
                        <div class="error-message">{{ form.username.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="{{ form.email.id_for_label }}">Email Address</label>
                        {{ form.email }}
                        {% if form.email.errors %}
                        <div class="error-message">{{ form.email.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Password Change Section -->
                <div class="form-section password-section">
                    <h3 class="section-title">Change Password</h3>
                    <p class="section-description">
                        Fill out the fields below only if you want to change your password.
                    </p>
                    
                    <div class="form-group">
                        <label for="{{ form.current_password.id_for_label }}">Current Password</label>
                        {{ form.current_password }}
                        {% if form.current_password.errors %}
                        <div class="error-message">{{ form.current_password.errors }}</div>
                        {% endif %}
                        <div class="field-help">
                            Enter your current password to authorize password change
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.new_password1.id_for_label }}">New Password</label>
                            {{ form.new_password1 }}
                            {% if form.new_password1.errors %}
                            <div class="error-message">{{ form.new_password1.errors }}</div>
                            {% endif %}
                            <div class="password-requirements">
                                <small>Your password must contain at least 8 characters.</small>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.new_password2.id_for_label }}">Confirm New Password</label>
                            {{ form.new_password2 }}
                            {% if form.new_password2.errors %}
                            <div class="error-message">{{ form.new_password2.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-icon">üíæ</span>
                        Save Changes
                    </button>
                    <a href="{% url 'user_profile' %}" class="btn btn-secondary">
                        <span class="btn-icon">‚Ü∂</span>
                        Cancel
                    </a>
                    <button type="button" class="btn btn-outline" id="clear-password">
                        <span class="btn-icon">üóëÔ∏è</span>
                        Clear Password Fields
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="{% static 'js/edit_profile.js' %}"></script>
</body>
</html>